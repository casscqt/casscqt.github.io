<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> iO 关于NavigationBar、NavigationItem的记录 · Cass的博客</title><meta name="description" content="iO 关于NavigationBar、NavigationItem的记录 - Cass"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="https://casscqt.github.io/atom.xml" title="Cass的博客"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/sunchongsheng" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/pinggod" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">iO 关于NavigationBar、NavigationItem的记录</h1><div class="post-info">Dec 15, 2016</div><div class="post-content"><blockquote>
<p>前言：经常遇到这样的需求：从有导航栏的界面跳转到导航栏透明的界面，由于iOS从有导航栏跳转到透明导航栏界面，并且设置hideBottomWhenPush属性会有<a href="http://www.jianshu.com/p/e3ca1b7b6cec" target="_blank" rel="external">bug</a>，即导航栏会有黑影。我采取将导航栏控制的navigationbar进行隐藏，自己在viewcontroller添加一个navigationbar以实现需求。过程中没有理解清楚navigationbar和navigationItem，这里简单记录一下。</p>
</blockquote>
<h2 id="NavigationBar"><a href="#NavigationBar" class="headerlink" title="NavigationBar"></a>NavigationBar</h2><blockquote>
<p>The navigation bar displays information from a stack of UINavigationItem objects. At any given time, the UINavigationItem that is currently the topItem of the stack determines the title and other optional information in the navigation bar, such as the right button and prompt.</p>
</blockquote>
<p>翻译：navigationbar 展示通过一个栈对象navgationItem来展示信息，栈顶的navgationItem对象决定着导航标题和其他信息，例如导航栏右边提示按钮。<br><a id="more"></a><br>这里可以得知如果想管理navigationbar上面的左右按钮，标题信息，则需要创建一个navigationItem对象，对navigationItem进行设置后再push,pop等操作进入到navigationbar的栈中。而如果管理样式，则通过属性控制或者修改子控件。navigationbar的层级结构如下：<br><img src="http://upload-images.jianshu.io/upload_images/132693-6058a24ae2b6d17a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="navigationbar层级结构.png"></p>
<p><img src="http://upload-images.jianshu.io/upload_images/132693-92f2fccb1d9f793f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Paste_Image.png"></p>
<p>结构中看出：<br>默认navigationbar高度为44点，但navigationbar的View却有84点的高度，iOS7以后对背景进行了延伸。View中有背景图View、底部线条View还有图中红色框部分的按钮等控件。设置导航栏透明经常对背景图与底部线条设置为透明的图片。</p>
<p>navigationController下默认有一个navigationBar，这是navigationController管理下所有viewcontroller共用的。对于某个页面设置导航栏透明，滑动渐变效果，可以让navigationController的隐藏掉，自己给每个viewcontroller增加一个navigationBar，对这个navigationBar进行处理。退出界面后将导航栏恢复显示。这个方案也是上面推荐链接一个方案之一。这样可以避免一些因为设置导航栏透明，在界面中跳转带来的系统bug。</p>
<h2 id="NavigationItem"><a href="#NavigationItem" class="headerlink" title="NavigationItem"></a>NavigationItem</h2><p><img src="http://upload-images.jianshu.io/upload_images/132693-721aa1698ae761d2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="NavigationItem属性.png"><br>NavigationItem是UIViewController的属性，这也是导航器管理下的viewcontroller中进行设置的原因：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">self.navigationItem.title = @&quot;title&quot;;</div></pre></td></tr></table></figure></p>
<p>而不是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">self.navigationController.navigationItem.title = @&quot;title&quot;;</div></pre></td></tr></table></figure></p>
<p>思考了一下navigationItem为什么是viewcontroller的属性，而不是navigationbar的属性呢？因为navigationbar是栈的方式管理navigationItem。navigationcontroller每次push或者pop一个viewcontroller，其实也执行了对navigationbar执行了push or pop item。这样每个viewcontroller拥有自己的navigationItem，则可以订制自己的页面导航栏。</p>
<h2 id="相关链接"><a href="#相关链接" class="headerlink" title="相关链接"></a>相关链接</h2><p>1.<a href="http://www.jianshu.com/p/e3ca1b7b6cec" target="_blank" rel="external">http://www.jianshu.com/p/e3ca1b7b6cec</a></p>
</div></article></div></main><footer><div class="paginator"><a href="/2016/12/03/零碎笔记/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="https://casscqt.github.io">Cass</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>